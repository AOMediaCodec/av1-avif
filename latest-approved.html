<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>AV1 Image File Format (AVIF)</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in § N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *     -> ins/del.c### for candidate and proposed changes (amendments)
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *   - .correction for "candidate corrections"       (div, aside, details, section)
 *   - .addition   for "candidate additions"         (div, aside, details, section)
 *   - .correction.proposed for "proposed corrections" (div, aside, details, section)
 *   - .addition.proposed   for "proposed additions"   (div, aside, details, section)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Outdated warning for old specs
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/* color variables included separately for reliability */

/******************************************************************************/
/*                                    Body                                    */
/******************************************************************************/

	html {
	}

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;			  /* limit line length to 50em for readability   */
		margin: 0 auto;				/* center text within page                    */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag    */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		color: black;
		color: var(--text);
		background: white top left fixed no-repeat;
		background: var(--bg) top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em; }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border: solid var(--logo-bg);
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		background: var(--logo-bg);
		color: white;
		color: var(--logo-text);
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		background: var(--logo-active-bg);
		border-color: #c00;
		border-color: var(--logo-active-bg);
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small; }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 3;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;

			color: #707070;
			color: var(--tocnav-normal-text);
			background: white;
			background: var(--tocnav-normal-bg);
		}
		#toc-nav > a:hover,
		#toc-nav > a:focus {
			color: black;
			color: var(--tocnav-hover-text);
			background: #f8f8f8;
			background: var(--tocnav-hover-bg);
		}
		#toc-nav > a:active {
			color: #c00;
			color: var(--tocnav-active-text);
			background: white;
			background: var(--tocnav-active-bg);
		}

		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;	/* Inherit the font family. */
		line-height: 1.2;		/* Keep wrapped headings compact */
		hyphens: manual;		/* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		color: var(--heading-text);
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#profile-and-date {
		/* #profile-and-date is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > :not(.head) + hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		color: black;
		color: var(--hr-text);
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	border-left: 0.5em solid #DEF;
	border-left: 0.5em solid var(--algo-border);
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	 padding: .5em;
	 border: thin solid #ddd;
	 border: thin solid var(--algo-border);
	 border-radius: .5em;
	 margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	 margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	 margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	margin-left: -2em;
	}
	dl.switch {
	padding-left: 2em;
	}
	dl.switch > dt {
	text-indent: -1.5em;
	margin-top: 1em;
	}
	dl.switch > dt + dt {
	margin-top: 0;
	}
	dl.switch > dt::before {
	content: '\21AA';
	padding: 0 0.5em 0 0;
	display: inline-block;
	width: 1em;
	text-align: right;
	line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del {
		color: #aa0000;
		color: var(--del-text);
		background: transparent;
		background: var(--del-bg);
		text-decoration: line-through;
	}
	ins {
		color: #006100;
		color: var(--ins-text);
		background: transparent;
		background: var(--ins-bg);
		text-decoration: underline;
	}

	/* for amendments (candidate/proposed changes) */

	.amendment ins, .correction ins, .addition ins,
	ins[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment del, .correction del, .addition del,
	del[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment.proposed ins, .correction.proposed ins, .addition.proposed ins,
	ins[class^=c].proposed {
		text-decoration-style: double;
	}
	.amendment.proposed del, .correction.proposed del, .addition.proposed del,
	del[class^=c].proposed {
		text-decoration-style: double;
	}

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		hyphens: none;
		text-transform: none;
		text-align: left;
		text-align: start;
		font-variant: normal;
		orphans: 3;
		widows: 3;
		page-break-before: avoid;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

	/* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		color: var(--a-normal-text);
		text-decoration: underline #707070;
		text-decoration: underline var(--a-normal-underline);
		text-decoration-skip-ink: none;
	}
	a:visited {
		color: #034575;
		color: var(--a-visited-text);
		text-decoration-color: #bbb;
		text-decoration-color: var(--a-visited-underline);
	}

	/* Indicate interaction with the link */
	a[href]:focus,
	a[href]:hover {
		text-decoration-thickness: 2px;
	}
	a[href]:active {
		color: #c00;
		color: var(--a-active-text);
		text-decoration-color: #c00;
		text-decoration-color: var(--a-active-underline);
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	img, svg {
		/* Intentionally not color-scheme aware. */
		background: white;
	}

	/* For autogen numbers, add
	  .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,	.sidefigure img,	figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
		height: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em;
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em; }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote,
	.amendment, .correction, .addition {
		margin: 1em auto;
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	blockquote > :first-child,
	.note  > p:first-child,
	.issue > p:first-child,
	.amendment > p:first-child,
	.correction > p:first-child,
	.addition > p:first-child {
		margin-top: 0;
	}
	blockquote > :last-child,
	.note  > p:last-child,
	.issue > p:last-child,
	.amendment > p:last-child,
	.correction > p:last-child,
	.addition > p:last-child {
		margin-bottom: 0;
	}


	.issue::before, .issue > .marker,
	.example::before, .example > .marker,
	.note::before, .note > .marker,
	details.note > summary > .marker,
	.amendment::before, .amendment > .marker,
	details.amendment > summary > .marker,
	.addition::before, .addition > .marker,
	addition.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	correction.amendment > summary > .marker
	{
		text-transform: uppercase;
		padding-right: 1em;
	}

	.example::before, .example > .marker {
		display: block;
		padding-right: 0em;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
		border-color: var(--blockquote-border);
		background: transparent;
		background: var(--blockquote-bg);
		color: currentcolor;
		color: var(--blockquote-text);
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #e05252;
		border-color: var(--issue-border);
		background: #fbe9e9;
		background: var(--issue-bg);
		color: black;
		color: var(--issue-text);
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		color: #831616;
		color: var(--issueheading-text);
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	  or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #e0cb52;
		border-color: var(--example-border);
		background: #fcfaee;
		background: var(--example-bg);
		color: black;
		color: var(--example-text);
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		color: #574b0f;
		color: var(--exampleheading-text);
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	  or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52e052;
		border-color: var(--note-border);
		background: #e9fbe9;
		background: var(--note-bg);
		color: black;
		color: var(--note-text);
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary {
		color: hsl(120, 70%, 30%);
		color: var(--noteheading-text);
	}
	/* Add .note::before { content: "Note "; } for autogen label,
	  or use class="marker" to mark up the label in source. */

	details.note[open] > summary {
		border-bottom: 1px silver solid;
		border-bottom: 1px var(--notesummary-underline) solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		border-color: var(--assertion-border);
		background: #EEE;
		background: var(--assertion-bg);
		color: black;
		color: var(--assertion-text);
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-color: var(--advisement-border);
		border-style: none solid;
		background: #fec;
		background: var(--advisement-bg);
		color: black;
		color: var(--advisement-text);
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement::before, .advisement > .marker {
		color: #b35f00;
		color: var(--advisementheading-text);
	}

/** Amendment Box *************************************************************/

	.amendment, .correction, .addition {
		border-color: #330099;
		border-color: var(--amendment-border);
		background: #F5F0FF;
		background: var(--amendment-bg);
		color: black;
		color: var(--amendment-text);
	}
	.amendment.proposed, .correction.proposed, .addition.proposed {
		border-style: solid;
		border-block-width: 0.25em;
	}
	.amendment::before, .amendment > .marker,
	details.amendment > summary::before, details.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	details.correction > summary::before, details.correction > summary > .marker,
	.addition::before, .addition > .marker,
	details.addition > summary::before, details.addition > summary > .marker {
		color: #220066;
		color: var(--amendmentheading-text);
	}
	.amendment.proposed::before, .amendment.proposed > .marker,
	details.amendment.proposed > summary::before, details.amendment.proposed > summary > .marker,
	.correction.proposed::before, .correction.proposed > .marker,
	details.correction.proposed > summary::before, details.correction.proposed > summary > .marker,
	.addition.proposed::before, .addition.proposed > .marker,
	details.addition.proposed > summary::before, details.addition.proposed > summary > .marker {
		font-weight: bold;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: hsla(40,100%,50%,0.95);
		background: var(--warning-bg);
		color: black;
		color: var(--warning-text);
		padding: .75em 1em;
		border: red;
		border: var(--warning-border);
		border-style: solid none;
		box-shadow: 0 2px 8px black;
		text-align: center;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 0;
		right: 0;
		bottom: 2em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #def;
		background: var(--def-bg);
		margin: 1.2em 0;
		border-left: 0.5em solid #8ccbf2;
		border-left: 0.5em solid var(--def-border);
		color: black;
		color: var(--def-text);
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
		border-bottom: 1px solid var(--defrow-border);
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def td.footnote {
		padding-top: 0.6em;
	}
	table.def td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		<table class="data"> highlights structural relationships in a table
		when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		Use class="complex data" for particularly complicated tables --
		(This will draw more lines: busier, but clearer.)

		Use class="long" on table cells with paragraph-like contents
		(This will adjust text alignment accordingly.)
		Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-color: var(--datacell-border);
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		border-top: 1px solid var(--datacell-border);
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		border: 1px solid var(--datacell-border);
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
		vertical-align: baseline;
		text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding: 0.1rem 1px 0;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Switch to using border-bottom for underlines */
		text-decoration: none;
		border-bottom: 1px solid;
		/* Reverse color scheme */
		color: black;
		color: var(--toclink-text);
		border-color: #3980b5;
		border-color: var(--toclink-underline);
	}
	.toc a:visited {
		color: black;
		color: var(--toclink-visited-text);
		border-color: #054572;
		border-color: var(--toclink-visited-underline);
	}
	.toc a:focus,
	.toc a:hover {
		background: rgba(75%, 75%, 75%, .25);
		background: var(--a-hover-bg);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
	}
	.toc {
		line-height: 1.1em;
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li			{ font-weight: bold;   }
	.toc > li li		 { font-weight: normal; }
	.toc > li li li	  { font-size:   95%;	}
	.toc > li li li li	{ font-size:   90%;	}
	.toc > li li li li li { font-size:   85%;	}

	/* @supports not (display:grid) { */
		.toc > li			{ margin: 1.5rem 0;	}
		.toc > li li		 { margin: 0.3rem 0;	}
		.toc > li li li	  { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}
		.toc > li li li li .secno { font-size: 85%; }
		.toc > li li li li li .secno { font-size: 100%; }

		.toc li {
			clear: both;
		}

		:not(li) > .toc			 { margin-left:  5rem; }
		.toc .secno				 { margin-left: -5rem; }
		.toc > li li li .secno	  { margin-left: -7rem; }
		.toc > li li li li .secno	{ margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc			 { margin-left:  4rem; }
			.toc .secno				 { margin-left: -4rem; }
			.toc > li li li			 { margin-left:  1rem; }
			.toc > li li li .secno	  { margin-left: -5rem; }
			.toc > li li li li .secno	{ margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
		/* Loosen it on wide screens */
		@media screen and (min-width: 78em) {
			body:not(.toc-inline) :not(li) > .toc			 { margin-left:  4rem; }
			body:not(.toc-inline) .toc .secno				 { margin-left: -4rem; }
			body:not(.toc-inline) .toc > li li li			 { margin-left:  1rem; }
			body:not(.toc-inline) .toc > li li li .secno	  { margin-left: -5rem; }
			body:not(.toc-inline) .toc > li li li li .secno	{ margin-left: -6rem; }
			body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			  comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover,
		#toc .content:focus {
			background: rgba(75%, 75%, 75%, .25);
			background: var(--a-hover-bg);
			border-bottom: 3px solid #054572;
			border-bottom: 3px solid var(--toclink-underline);
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index	  { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li	{ margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em; }
	ul.index dl	{ margin-top: 0; }
	ul.index dt	{ margin: .2em 0 .2em 20px;}
	ul.index dd	{ margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li a + span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
			color: var(--indexinfo-text);
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		color: black;
		color: var(--indextable-hover-text);
		background: #f7f8f9;
		background: var(--indextable-hover-bg);
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/** Outdated warning **********************************************************/

.outdated-spec {
	color: black;
	color: var(--outdatedspec-text);
	background-color: rgba(0,0,0,0.5);
	background-color: var(--outdatedspec-bg);
}

.outdated-warning {
	position: fixed;
	bottom: 50%;
	left: 0;
	right: 0;
	margin: 0 auto;
	width: 50%;
	background: maroon;
	background: var(--outdated-bg);
	color: white;
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	position: absolute;
	top: 0;
	right:0;
	margin: 0;
	border: 0;
	padding: 0.25em 0.5em;
	background: transparent;
	color: white;
	color: var(--outdated-text);
	font:1em sans-serif;
	text-align:center;
}

.outdated-warning span {
	display: block;
}

.outdated-collapsed {
	bottom: 0;
	border-radius: 0;
	width: 100%;
	padding: 0;
}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}

		.outdated-warning {
			position: absolute;
			border-style: solid;
			border-color: red;
		}

		.outdated-warning input {
			display: none;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good item positioning:
		  "content column" is 50ems wide at max; less on smaller screens.
		  Extra space (after ToC + content) is empty on the right.

		  1. When item < content column, centers item in column.
		  2. When content < item < available, left-aligns.
		  3. When item > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			* http://lea.verou.me/2012/04/background-attachment-local/
			*
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
						top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
						top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version cace53f8c, updated Tue Dec 7 12:12:54 2021 -0800" name="generator">
  <link href="https://AOMediaCodec.github.io/av1-avif/v1.1.0.html" rel="canonical">
  <meta content="3af4bb2b7c690c688b751ca322b87e59e34c0501" name="document-revision">
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-issues */

a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.aomedia.org/" style="width: 200px"> <img alt="AOM" height="60" src="https://aomedia.org/assets/images/aomedia-logo-rgb.svg" width="200"> <img src="https://aomedia.org/assets/images/avif-logo-rgb.svg" width="200"> </a> </p>
   <h1 class="p-name no-ref" id="title">AV1 Image File Format (AVIF)</h1>
   <h2 class="p-name no-num no-toc no-ref heading settled" id="subtitle"><span class="content">v1.1.0</span></h2>
   <h3 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">AOM Final Deliverable, <time class="dt-updated" datetime="2022-04-15">15 April 2022</time></span></h3>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://AOMediaCodec.github.io/av1-avif/v1.1.0.html">https://AOMediaCodec.github.io/av1-avif/v1.1.0.html</a>
     <dt>Latest version:
     <dd><a href="https://AOMediaCodec.github.io/av1-avif">https://AOMediaCodec.github.io/av1-avif</a>
     <dt>Previously approved version:
     <dd><a href="v1.0.0.html">v1.0.0</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/AOMediaCodec/av1-avif/issues/">GitHub</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:cconcolato@netflix.com">Cyril Concolato</a> (<span class="p-org org">Netflix</span>)
     <dt class="editor">Former Editors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:pkerr@netflix.com">Paul Kerr</a> (<span class="p-org org">Netflix</span>)
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:Anders.Klemets@microsoft.com">Anders Klemets</a> (<span class="p-org org">Microsoft</span>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright">
    <p>Copyright 2022, <a href="https://aomedia.org">AOM</a></p>
    <p>Licensing information is available at <a href="http://aomedia.org/license/">http://aomedia.org/license/</a></p>
    <p>The MATERIALS ARE PROVIDED “AS IS.” The Alliance for Open Media, its members, and its contributors expressly disclaim any warranties (express, implied, or otherwise), including implied warranties of merchantability, non-infringement, fitness for a particular purpose, or title, related to the materials. The entire risk as to implementing or otherwise using the materials is assumed by the implementer and user. IN NO EVENT WILL THE ALLIANCE FOR OPEN MEDIA, ITS MEMBERS, OR CONTRIBUTORS BE LIABLE TO ANY OTHER PARTY FOR LOST PROFITS OR ANY FORM OF INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES OF ANY CHARACTER FROM ANY CAUSES OF ACTION OF ANY KIND WITH RESPECT TO THIS DELIVERABLE OR ITS GOVERNING AGREEMENT, WHETHER BASED ON BREACH OF CONTRACT, TORT (INCLUDING NEGLIGENCE), OR OTHERWISE, AND WHETHER OR NOT THE OTHER MEMBER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
   </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document specifies syntax and semantics for the storage of <a data-link-type="biblio" href="#biblio-av1">[AV1]</a> images in the generic image file format <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a>, which is based on <a data-link-type="biblio" href="#biblio-isobmff">[ISOBMFF]</a>. While <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a> defines general requirements, this document also specifies additional constraints to ensure higher interoperability between writers and readers when <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a> is used with <a data-link-type="biblio" href="#biblio-av1">[AV1]</a> images. These constraints are based on constraints defined in the Multi-Image Application Format <a data-link-type="biblio" href="#biblio-miaf">[MIAF]</a> and are grouped into profiles inspired by the profiles defined in <a data-link-type="biblio" href="#biblio-miaf">[MIAF]</a>.</p>
  </div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#general"><span class="secno">1</span> <span class="content">Scope</span></a>
    <li>
     <a href="#image-item-and-properties"><span class="secno">2</span> <span class="content">Image Items and properties</span></a>
     <ol class="toc">
      <li><a href="#image-item"><span class="secno">2.1</span> <span class="content">AV1 Image Item</span></a>
      <li>
       <a href="#image-item-properties"><span class="secno">2.2</span> <span class="content">Image Item Properties</span></a>
       <ol class="toc">
        <li><a href="#av1-configuration-item-property"><span class="secno">2.2.1</span> <span class="content">AV1 Item Configuration Property</span></a>
        <li><a href="#image-spatial-extents-property"><span class="secno">2.2.2</span> <span class="content">Image Spatial Extents Property</span></a>
        <li><a href="#other-item-property"><span class="secno">2.2.3</span> <span class="content">Other Item Properties</span></a>
       </ol>
      <li>
       <a href="#layered-items"><span class="secno">2.3</span> <span class="content">AV1 Layered Image Items</span></a>
       <ol class="toc">
        <li><a href="#layered-items-overview"><span class="secno">2.3.1</span> <span class="content">Overview</span></a>
        <li>
         <a href="#layered-properties"><span class="secno">2.3.2</span> <span class="content">Properties</span></a>
         <ol class="toc">
          <li><a href="#operating-point-selector-property"><span class="secno">2.3.2.1</span> <span class="content">Operating Point Selector Property</span></a>
          <li><a href="#layer-selector-property"><span class="secno">2.3.2.2</span> <span class="content">Layer Selector Property</span></a>
          <li><a href="#layered-image-indexing-property"><span class="secno">2.3.2.3</span> <span class="content">Layered Image Indexing Property</span></a>
         </ol>
       </ol>
     </ol>
    <li><a href="#image-sequences"><span class="secno">3</span> <span class="content">Image Sequences</span></a>
    <li><a href="#auxiliary-images"><span class="secno">4</span> <span class="content">Auxiliary Image Items and Sequences</span></a>
    <li>
     <a href="#brands"><span class="secno">5</span> <span class="content">Brands, Internet media types and file extensions</span></a>
     <ol class="toc">
      <li><a href="#brands-overview"><span class="secno">5.1</span> <span class="content">Brands overview</span></a>
      <li><a href="#image-and-image-collection-brand"><span class="secno">5.2</span> <span class="content">AVIF image and image collection brand</span></a>
      <li><a href="#image-sequence-brand"><span class="secno">5.3</span> <span class="content">AVIF image sequence brands</span></a>
     </ol>
    <li><a href="#file-constraints"><span class="secno">6</span> <span class="content">General constraints</span></a>
    <li>
     <a href="#profiles"><span class="secno">7</span> <span class="content">Profiles</span></a>
     <ol class="toc">
      <li><a href="#profiles-overview"><span class="secno">7.1</span> <span class="content">Overview</span></a>
      <li><a href="#baseline-profile"><span class="secno">7.2</span> <span class="content">AVIF Baseline Profile</span></a>
      <li><a href="#advanced-profile"><span class="secno">7.3</span> <span class="content">AVIF Advanced Profile</span></a>
     </ol>
    <li><a href="#mime-registration"><span class="secno">8</span> <span class="content">AVIF Media Type Registration</span></a>
    <li><a href="#change-list"><span class="secno">9</span> <span class="content">Changes since v1.0.0 release</span></a>
    <li><a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="general"><span class="secno">1. </span><span class="content">Scope</span><a class="self-link" href="#general"></a></h2>
   <p><a data-link-type="biblio" href="#biblio-av1">[AV1]</a> defines the syntax and semantics of an <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1">AV1 bitstream</a>. The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="av1-image-file-format">AV1 Image File Format</dfn> (AVIF) defined in this document supports the storage of a subset of the syntax and semantics of an <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1①">AV1 bitstream</a> in a <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a> file.
The <a data-link-type="dfn" href="#av1-image-file-format" id="ref-for-av1-image-file-format">AV1 Image File Format</a> defines multiple profiles, which restrict the allowed syntax and semantics of the <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1②">AV1 bitstream</a> with the goal to improve interoperability, especially for hardware implementations.
The profiles defined in this specification follow the conventions of the <a data-link-type="biblio" href="#biblio-miaf">[MIAF]</a> specification.
Images encoded with AV1 and not meeting the restrictions of the defined profiles may still be compliant to this <a data-link-type="dfn" href="#av1-image-file-format" id="ref-for-av1-image-file-format①">AV1 Image File Format</a> if they adhere to the general AVIF requirements.</p>
   <p><a data-link-type="dfn" href="#av1-image-file-format" id="ref-for-av1-image-file-format②">AV1 Image File Format</a> supports High Dynamic Range (HDR) and Wide Color Gamut (WCG) images as well as Standard Dynamic Range (SDR). It supports monochrome images as well as multi-channel images with all the bit depths and color spaces specified in <a data-link-type="biblio" href="#biblio-av1">[AV1]</a>.</p>
   <p><a data-link-type="dfn" href="#av1-image-file-format" id="ref-for-av1-image-file-format③">AV1 Image File Format</a> also supports multi-layer images as specified in <a data-link-type="biblio" href="#biblio-av1">[AV1]</a> to be stored both in image items and image sequences.</p>
   <p>An AVIF file is designed to be a conformant <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a> file for both image items and image sequences. Specifically, this specification follows the recommendations given in "Annex I: Guidelines On Defining
New Image Formats and Brands" of <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a>.</p>
   <p>This specification reuses syntax and semantics used in <a data-link-type="biblio" href="#biblio-av1-isobmff">[AV1-ISOBMFF]</a>.</p>
   <h2 class="heading settled" data-level="2" id="image-item-and-properties"><span class="secno">2. </span><span class="content">Image Items and properties</span><a class="self-link" href="#image-item-and-properties"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="image-item"><span class="secno">2.1. </span><span class="content">AV1 Image Item</span><a class="self-link" href="#image-item"></a></h3>
   <p>When an item is of type <dfn class="css" data-dfn-for="AV1 Image Item Type" data-dfn-type="value" data-export id="valdef-av1-image-item-type-av01">av01<a class="self-link" href="#valdef-av1-image-item-type-av01"></a></dfn>, it is called an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="av1-image-item">AV1 Image Item</dfn>, and shall obey the following constraints:</p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item">AV1 Image Item</a> shall be a conformant <a data-link-type="dfn" href="#biblio-miaf" id="ref-for-biblio-miaf">MIAF image item</a>.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item①">AV1 Image Item</a> shall be associated with an <a data-link-type="dfn" href="#av1-item-configuration-property" id="ref-for-av1-item-configuration-property">AV1 Item Configuration Property</a>.</p>
    <li data-md>
     <p>The content of an <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item②">AV1 Image Item</a> is called the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="av1-image-item-data">AV1 Image Item Data</dfn> and shall obey the following constraints:</p>
     <ul>
      <li data-md>
       <p>The <a data-link-type="dfn" href="#av1-image-item-data" id="ref-for-av1-image-item-data">AV1 Image Item Data</a> shall be identical to the content of an <a data-link-type="dfn" href="#biblio-av1-isobmff" id="ref-for-biblio-av1-isobmff">AV1 Sample</a> marked as <a class="property" data-link-type="propdesc" href="#biblio-isobmff" id="ref-for-biblio-isobmff">sync</a>, as defined in <a data-link-type="biblio" href="#biblio-av1-isobmff">[AV1-ISOBMFF]</a>.</p>
      <li data-md>
       <p>The <a data-link-type="dfn" href="#av1-image-item-data" id="ref-for-av1-image-item-data①">AV1 Image Item Data</a> shall have exactly one <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1③">Sequence Header OBU</a>.</p>
      <li data-md>
       <p>If the <a data-link-type="dfn" href="#av1-image-item-data" id="ref-for-av1-image-item-data②">AV1 Image Item Data</a> consists of a single frame (i.e. when using a single layer),</p>
       <ul>
        <li data-md>
         <p>It should have its <code><a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1④">still_picture</a></code> flag set to 1.</p>
        <li data-md>
         <p>It should have its <code><a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1⑤">reduced_still_picture_header</a></code> flag set to 1.</p>
       </ul>
     </ul>
   </ul>
   <h3 class="heading settled" data-level="2.2" id="image-item-properties"><span class="secno">2.2. </span><span class="content">Image Item Properties</span><a class="self-link" href="#image-item-properties"></a></h3>
   <h4 class="heading settled" data-level="2.2.1" id="av1-configuration-item-property"><span class="secno">2.2.1. </span><span class="content">AV1 Item Configuration Property</span><a class="self-link" href="#av1-configuration-item-property"></a></h4>
<pre class="def">Box Type:                 <dfn data-dfn-for="AV1 Item Configuration Property" data-dfn-type="value" data-export id="valdef-av1-item-configuration-property-av1c">av1C<a class="self-link" href="#valdef-av1-item-configuration-property-av1c"></a></dfn>
Property type:            Descriptive item property
Container:                ItemPropertyContainerBox
Mandatory (per  item):    Yes, for an image item of type 'av01'
Quantity:                 One for an image item of type 'av01'
</pre>
   <p>The syntax and semantics of the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="av1-item-configuration-property">AV1 Item Configuration Property</dfn> are identical to those of the <a data-link-type="dfn" href="#biblio-av1-isobmff" id="ref-for-biblio-av1-isobmff①">AV1CodecConfigurationBox</a> defined in <a data-link-type="biblio" href="#biblio-av1-isobmff">[AV1-ISOBMFF]</a>, with the following constraints:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1⑥">Sequence Header OBUs</a> should not be present in the <a data-link-type="dfn" href="#biblio-av1-isobmff" id="ref-for-biblio-av1-isobmff②">AV1CodecConfigurationBox</a>.</p>
    <li data-md>
     <p>If a <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1⑦">Sequence Header OBU</a> is present in the <a data-link-type="dfn" href="#biblio-av1-isobmff" id="ref-for-biblio-av1-isobmff③">AV1CodecConfigurationBox</a>, it shall match the <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1⑧">Sequence Header OBU</a> in the <a data-link-type="dfn" href="#av1-image-item-data" id="ref-for-av1-image-item-data③">AV1 Image Item Data</a>.</p>
    <li data-md>
     <p>The values of the fields in the <a data-link-type="dfn" href="#biblio-av1-isobmff" id="ref-for-biblio-av1-isobmff④">AV1CodecConfigurationBox</a> shall match those of the <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1⑨">Sequence Header OBU</a> in the <a data-link-type="dfn" href="#av1-image-item-data" id="ref-for-av1-image-item-data④">AV1 Image Item Data</a>.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1①⓪">Metadata OBUs</a>, if present, shall match the values given in other item properties, such as the PixelInformationProperty or ColourInformationBox.</p>
   </ul>
   <p>This property should be marked as essential.</p>
   <h4 class="heading settled" data-level="2.2.2" id="image-spatial-extents-property"><span class="secno">2.2.2. </span><span class="content">Image Spatial Extents Property</span><a class="self-link" href="#image-spatial-extents-property"></a></h4>
   <p>The semantics of the <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif">ispe</a> property as defined in <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a> apply. More specifically, for AV1 images, the values of <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif①">image_width</a> and <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif②">image_height</a> shall respectively equal the values of <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1①①">FrameWidth</a> and <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1①②">FrameHeight</a> as defined in <a data-link-type="biblio" href="#biblio-av1">[AV1]</a> but for a specific frame in the item payload. The exact frame depends on the presence and content of the <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif③">lsel</a> and <a data-link-type="dfn" href="#operatingpointselectorproperty" id="ref-for-operatingpointselectorproperty">OperatingPointSelectorProperty</a> properties as follows:</p>
   <ul>
    <li data-md>
     <p>In the absence of a <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif④">lsel</a> property associated with the item, or if it is present and its <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif⑤">layer_id</a> value is set to 0xFFFF:</p>
     <ul>
      <li data-md>
       <p>If no <a data-link-type="dfn" href="#operatingpointselectorproperty" id="ref-for-operatingpointselectorproperty①">OperatingPointSelectorProperty</a> is associated with the item, the <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif⑥">ispe</a> shall document the dimensions of the last frame decoded when processing the operating point whose index is 0.</p>
      <li data-md>
       <p>If an <a data-link-type="dfn" href="#operatingpointselectorproperty" id="ref-for-operatingpointselectorproperty②">OperatingPointSelectorProperty</a> is associated with the item, the <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif⑦">ispe</a> property shall document the dimensions of the last frame decoded when processing the corresponding operating point.</p>
     </ul>
     <p class="note" role="note"><span>NOTE:</span> The dimensions of possible intermediate output images might not match the ones given in the <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif⑧">ispe</a> property. If they display these intermediate images, renderers are expected to scale the output image to match the <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif⑨">ispe</a> property.</p>
    <li data-md>
     <p>If a <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif①⓪">lsel</a> property is associated with an item and its <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif①①">layer_id</a> is different from 0xFFFF, the <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif①②">ispe</a> property documents the dimensions of the output frame produced by decoding the corresponding layer.</p>
   </ul>
   <p class="note" role="note"><span>NOTE:</span> The dimensions indicated in the <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif①③">ispe</a> property might not match the values <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1①③">max_frame_width_minus1</a>+1 and <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1①④">max_frame_height_minus1</a>+1 indicated in the AV1 bitstream.</p>
   <p class="note" role="note"><span>NOTE:</span> The values of <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1①⑤">render_width_minus1</a> and <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1①⑥">render_height_minus1</a> possibly present in the AV1 bistream are not exposed in the AVIF container level.</p>
   <h4 class="heading settled" data-level="2.2.3" id="other-item-property"><span class="secno">2.2.3. </span><span class="content">Other Item Properties</span><a class="self-link" href="#other-item-property"></a></h4>
   <p>In addition to the Image Properties defined in <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a>, such as <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif①④">colr</a>, <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif①⑤">pixi</a> or <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif①⑥">pasp</a>, <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item③">AV1 image items</a> MAY also be associated with <a class="property" data-link-type="propdesc" href="#biblio-isobmff" id="ref-for-biblio-isobmff①">clli</a>, <a class="property" data-link-type="propdesc" href="#biblio-isobmff" id="ref-for-biblio-isobmff②">cclv</a> and <a class="property" data-link-type="propdesc" href="#biblio-isobmff" id="ref-for-biblio-isobmff③">mdcv</a> introduced in <a data-link-type="biblio" href="#biblio-miaf">[MIAF]</a>.</p>
   <p>In general, it is recommended to use properties instead of <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1①⑦">Metadata OBUs</a> in the <a data-link-type="dfn" href="#av1-item-configuration-property" id="ref-for-av1-item-configuration-property①">AV1 Item Configuration Property</a>.</p>
   <p class="note" role="note"><span>NOTE:</span> Although the clean aperture property (<a class="property" data-link-type="propdesc" href="#biblio-isobmff" id="ref-for-biblio-isobmff④">clap</a>) defined in <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a> is applicable to AVIF, implementers of authoring tools should be aware of the possibility of unintended consequences since users may not realize image data outside the clap region is still in the file. A future revision of this specification may place normative restrictions on how clap can be used.</p>
   <h3 class="heading settled" data-level="2.3" id="layered-items"><span class="secno">2.3. </span><span class="content">AV1 Layered Image Items</span><a class="self-link" href="#layered-items"></a></h3>
   <h4 class="heading settled" data-level="2.3.1" id="layered-items-overview"><span class="secno">2.3.1. </span><span class="content">Overview</span><a class="self-link" href="#layered-items-overview"></a></h4>
   <p><a data-link-type="biblio" href="#biblio-av1">[AV1]</a> supports encoding a frame using multiple spatial layers. A spatial layer may improve the resolution or quality of the image decoded based on one or more of the previous layers. A layer may also provide an image that does not depend on the previous layers. Additionally, not all layers are expected to produce an image meant to be rendered. Some decoded images may be used only as intermediate decodes. Finally, layers are grouped into one or more <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1①⑧">Operating Points</a>. The <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1①⑨">Sequence Header OBU</a> defines the list of <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1②⓪">Operating Points</a>, provides required decoding capabilities, and indicates which layers form each <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1②①">Operating Point</a>.</p>
   <p><a data-link-type="biblio" href="#biblio-av1">[AV1]</a> delegates the selection of which <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1②②">Operating Point</a> to process to the application, by means of a function called <code>choose_operating_point()</code>. AVIF defines the <a data-link-type="dfn" href="#operatingpointselectorproperty" id="ref-for-operatingpointselectorproperty③">OperatingPointSelectorProperty</a> to control this selection. In the absence of an <a data-link-type="dfn" href="#operatingpointselectorproperty" id="ref-for-operatingpointselectorproperty④">OperatingPointSelectorProperty</a> associated with an <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item④">AV1 Image Item</a>, the AVIF renderer is free to process any <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1②③">Operating Point</a> present in the <a data-link-type="dfn" href="#av1-image-item-data" id="ref-for-av1-image-item-data⑤">AV1 Image Item Data</a>. In particular, when the <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item⑤">AV1 Image Item</a> is composed of a unique <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1②④">Operating Point</a>, the <a data-link-type="dfn" href="#operatingpointselectorproperty" id="ref-for-operatingpointselectorproperty⑤">OperatingPointSelectorProperty</a> should not be present. If an <a data-link-type="dfn" href="#operatingpointselectorproperty" id="ref-for-operatingpointselectorproperty⑥">OperatingPointSelectorProperty</a> is associated with an <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item⑥">AV1 Image Item</a>, the <code>op_index</code> field indicates which <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1②⑤">Operating Point</a> is expected to be processed for this item.</p>
   <p class="note" role="note"><span>NOTE:</span> When an author wants to offer the ability to render multiple <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1②⑥">Operating Points</a> from the same AV1 image (e.g. in the case of multi-view images), multiple <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item⑦">AV1 Image Items</a> can be created that share the same <a data-link-type="dfn" href="#av1-image-item-data" id="ref-for-av1-image-item-data⑥">AV1 Image Item Data</a> but have different <a data-link-type="dfn" href="#operatingpointselectorproperty" id="ref-for-operatingpointselectorproperty⑦">OperatingPointSelectorProperty</a>s.</p>
   <p><a data-link-type="biblio" href="#biblio-av1">[AV1]</a> expects the renderer to display only one frame within the selected <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1②⑦">Operating Point</a>, which should be the highest spatial layer that is both within the <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1②⑧">Operating Point</a> and present within the temporal unit, but <a data-link-type="biblio" href="#biblio-av1">[AV1]</a> leaves the option for other applications to set their own policy about which frames are output, as defined in the general output process. AVIF sets a different policy, and defines how the <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif①⑦">lsel</a> property (mandated by <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a> for layered images) is used to control which layer is rendered. According to <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a>, the interpretation of the <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif①⑧">layer_id</a> field in the <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif①⑨">lsel</a> property is codec specific. In this specification, the value 0xFFFF is reserved for a special meaning. If a <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif②⓪">lsel</a> property is associated with an <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item⑧">AV1 Image Item</a> but its <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif②①">layer_id</a> value is set to 0xFFFF, the renderer is free to render either only the output image of the highest spatial layer, or to render all output images of all the intermediate layers and the highest spatial layer, resulting in a form of progressive decoding. If a <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif②②">lsel</a> property is associated with an <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item⑨">AV1 Image Item</a> and the value of <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif②③">layer_id</a> is not 0xFFFF, the renderer is expected to render only the output image for that layer.</p>
   <p class="note" role="note"><span>NOTE:</span> When such a progressive decoding of the layers within an <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1②⑨">Operating Point</a> is not desired or when an author wants to expose each layer as a specific item, multiple <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item①⓪">AV1 Image Items</a> sharing the same <a data-link-type="dfn" href="#av1-image-item-data" id="ref-for-av1-image-item-data⑦">AV1 Image Item Data</a> can be created and associated with different <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif②④">lsel</a> properties, each with a different value of <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif②⑤">layer_id</a>.</p>
   <h4 class="heading settled" data-level="2.3.2" id="layered-properties"><span class="secno">2.3.2. </span><span class="content">Properties</span><a class="self-link" href="#layered-properties"></a></h4>
   <h5 class="heading settled" data-level="2.3.2.1" id="operating-point-selector-property"><span class="secno">2.3.2.1. </span><span class="content">Operating Point Selector Property</span><a class="self-link" href="#operating-point-selector-property"></a></h5>
   <h6 class="no-toc heading settled" data-level="2.3.2.1.1" id="operating-point-selector-property-definition"><span class="secno">2.3.2.1.1. </span><span class="content">Definition</span><a class="self-link" href="#operating-point-selector-property-definition"></a></h6>
<pre class="def">Box Type:       <dfn data-dfn-for="OperatingPointSelectorProperty" data-dfn-type="dfn" data-export id="operatingpointselectorproperty-a1op" value="a1op">a1op<a class="self-link" href="#operatingpointselectorproperty-a1op"></a></dfn>
Property type:  Descriptive item property
Container:      <code>ItemPropertyContainerBox</code>
Mandatory:      No
Quantity:       Zero or one
</pre>
   <h6 class="no-toc heading settled" data-level="2.3.2.1.2" id="operating-point-selector-property-description"><span class="secno">2.3.2.1.2. </span><span class="content">Description</span><a class="self-link" href="#operating-point-selector-property-description"></a></h6>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="operatingpointselectorproperty">OperatingPointSelectorProperty</dfn> may be associated with an <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item①①">AV1 Image Item</a> to provide the index of the operating point to be processed for this item. If associated, it shall be marked as essential.</p>
   <h6 class="no-toc heading settled" data-level="2.3.2.1.3" id="operating-point-selector-property-syntax"><span class="secno">2.3.2.1.3. </span><span class="content">Syntax</span><a class="self-link" href="#operating-point-selector-property-syntax"></a></h6>
<pre>class OperatingPointSelectorProperty extends ItemProperty('a1op') {
    unsigned int(8) op_index;
}
</pre>
   <h6 class="no-toc heading settled" data-level="2.3.2.1.4" id="operating-point-selector-property-semantics"><span class="secno">2.3.2.1.4. </span><span class="content">Semantics</span><a class="self-link" href="#operating-point-selector-property-semantics"></a></h6>
   <p><dfn data-dfn-type="dfn" data-noexport id="op_index">op_index<a class="self-link" href="#op_index"></a></dfn> indicates the index of the operating point to be processed for this item. Its value shall be between 0 and <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1③⓪">operating_points_cnt_minus_1</a>.</p>
   <h5 class="heading settled" data-level="2.3.2.2" id="layer-selector-property"><span class="secno">2.3.2.2. </span><span class="content">Layer Selector Property</span><a class="self-link" href="#layer-selector-property"></a></h5>
    The <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif②⑥">lsel</a> property defined in <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a> may be associated with an <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item①②">AV1 Image Item</a>. The <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif②⑦">layer_id</a> indicates the value of the <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1③①">spatial_id</a> to render. The value shall be between 0 and 3, or the special value 0xFFFF. When a value between 0 and 3 is used, the corresponding spatial layer shall be present in the bitstream and shall produce an output frame. Other layers may be needed to decode the indicated layer. When the special value 0xFFFF is used, progressive decoding is allowed as described in <a href="#layered-items-overview">§ 2.3.1 Overview</a>. 
   <h5 class="heading settled" data-level="2.3.2.3" id="layered-image-indexing-property"><span class="secno">2.3.2.3. </span><span class="content">Layered Image Indexing Property</span><a class="self-link" href="#layered-image-indexing-property"></a></h5>
   <h6 class="no-toc heading settled" data-level="2.3.2.3.1" id="layered-image-indexing-property-definition"><span class="secno">2.3.2.3.1. </span><span class="content">Definition</span><a class="self-link" href="#layered-image-indexing-property-definition"></a></h6>
<pre class="def">Box Type:       <dfn data-dfn-for="AV1LayeredImageIndexingProperty" data-dfn-type="value" data-export id="valdef-av1layeredimageindexingproperty-a1lx">a1lx<a class="self-link" href="#valdef-av1layeredimageindexingproperty-a1lx"></a></dfn>
Property type:  Descriptive item property
Container:      <code>ItemPropertyContainerBox</code>
Mandatory:      No
Quantity:       Zero or one
</pre>
   <h6 class="no-toc heading settled" data-level="2.3.2.3.2" id="layered-image-indexing-property-description"><span class="secno">2.3.2.3.2. </span><span class="content">Description</span><a class="self-link" href="#layered-image-indexing-property-description"></a></h6>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="av1layeredimageindexingproperty">AV1LayeredImageIndexingProperty</dfn> property may be associated with an <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item①③">AV1 Image Item</a>. It should not be associated with <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item①④">AV1 Image Items</a> consisting of only one layer.</p>
   <p>The <a data-link-type="dfn" href="#av1layeredimageindexingproperty" id="ref-for-av1layeredimageindexingproperty">AV1LayeredImageIndexingProperty</a> documents the size in bytes of each layer (except the last one) in the <a data-link-type="dfn" href="#av1-image-item-data" id="ref-for-av1-image-item-data⑧">AV1 Image Item Data</a>, and enables determining the byte ranges required to process one or more layers of an <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1③②">Operating Point</a>. If associated, it shall not be marked as essential.</p>
   <h6 class="no-toc heading settled" data-level="2.3.2.3.3" id="layered-image-indexing-property-syntax"><span class="secno">2.3.2.3.3. </span><span class="content">Syntax</span><a class="self-link" href="#layered-image-indexing-property-syntax"></a></h6>
<pre>class AV1LayeredImageIndexingProperty extends ItemProperty('a1lx') {
    unsigned int(7) reserved = 0;
    unsigned int(1) large_size;
    FieldLength = (large_size + 1) * 16;
    unsigned int(FieldLength) layer_size[3];
}
</pre>
   <h6 class="no-toc heading settled" data-level="2.3.2.3.4" id="layered-image-indexing-property-semantics"><span class="secno">2.3.2.3.4. </span><span class="content">Semantics</span><a class="self-link" href="#layered-image-indexing-property-semantics"></a></h6>
   <p><dfn data-dfn-type="dfn" data-noexport id="layer_size">layer_size<a class="self-link" href="#layer_size"></a></dfn> indicates the number of bytes corresponding to each layer in the item payload, except for the last layer. Values are provided in increasing order of <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1③③">spatial_id</a>. A value of zero means that all the layers except the last one have been documented and following values shall be 0. The number of non-zero values shall match the number of layers in the image minus one.</p>
   <p class="note" role="note"><span>NOTE:</span> The size of the last layer can be determined by subtracting the sum of the sizes of all layers indicated in this property from the entire item size.</p>
   <div class="example" id="example-4f7751ed"><a class="self-link" href="#example-4f7751ed"></a>A property indicating [X,0,0] is used for an image item composed of 2 layers. The size of the first layer is X and the size of the second layer is ItemSize - X. Note that the <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1③④">spatial_id</a> for the first layer does not necessarily match the index in the array that provides the size. In other words, in this case the index giving value X is 0, but the corresponding <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1③⑤">spatial_id</a> could be 0, 1 or 2. Similarly, a property indicating [X,Y,0] is used for an image made of 3 layers.</div>
   <h2 class="heading settled" data-level="3" id="image-sequences"><span class="secno">3. </span><span class="content">Image Sequences</span><a class="self-link" href="#image-sequences"></a></h2>
   <p> An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="av1-image-sequence">AV1 Image Sequence</dfn> is defined as a set of AV1 <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1③⑥">Temporal Units</a> stored in an <a data-link-type="dfn" href="#biblio-av1-isobmff" id="ref-for-biblio-av1-isobmff⑤">AV1 track</a> as defined in <a data-link-type="biblio" href="#biblio-av1-isobmff">[AV1-ISOBMFF]</a> with the following constraints: </p>
   <ul>
    <li data-md>
     <p>The track shall be a valid <a data-link-type="dfn" href="#biblio-miaf" id="ref-for-biblio-miaf①">MIAF image sequence</a>.</p>
    <li data-md>
     <p>The track handler for an <a data-link-type="dfn" href="#av1-image-sequence" id="ref-for-av1-image-sequence">AV1 Image Sequence</a> shall be <code>pict</code>.</p>
    <li data-md>
     <p>The track shall have only one sample description entry.</p>
    <li data-md>
     <p>If multiple <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1③⑦">Sequence Header OBUs</a> are present in the track payload, they shall be identical.</p>
   </ul>
   <h2 class="heading settled" data-level="4" id="auxiliary-images"><span class="secno">4. </span><span class="content">Auxiliary Image Items and Sequences</span><a class="self-link" href="#auxiliary-images"></a></h2>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="av1-auxiliary-image-item">AV1 Auxiliary Image Item</dfn> (respectively an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="av1-auxiliary-image-sequence">AV1 Auxiliary Image Sequence</dfn>) is an <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item①⑤">AV1 Image Item</a> (respectively <a data-link-type="dfn" href="#av1-image-sequence" id="ref-for-av1-image-sequence①">AV1 Image Sequence</a>) with the following additional constraints: </p>
   <ul>
    <li data-md>
     <p>It shall be a compliant <a data-link-type="dfn" href="#biblio-miaf" id="ref-for-biblio-miaf②">MIAF Auxiliary Image Item</a> (respectively <a data-link-type="dfn" href="#biblio-miaf" id="ref-for-biblio-miaf③">MIAF Auxiliary Image Sequence</a>).</p>
    <li data-md>
     <p>The <code><a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1③⑧">mono_chrome</a></code> field in the <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1③⑨">Sequence Header OBU</a> shall be set to 1.</p>
    <li data-md>
     <p>The <code><a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1④⓪">color_range</a></code> field in the <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1④①">Sequence Header OBU</a> shall be set to 1.</p>
   </ul>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="av1-alpha-image-item">AV1 Alpha Image Item</dfn> (respectively an <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="av1-alpha-image-sequence">AV1 Alpha Image Sequence</dfn>) is an <a data-link-type="dfn" href="#av1-auxiliary-image-item" id="ref-for-av1-auxiliary-image-item">AV1 Auxiliary Image Item</a> (respectively an <a data-link-type="dfn" href="#av1-auxiliary-image-sequence" id="ref-for-av1-auxiliary-image-sequence">AV1 Auxiliary Image Sequence</a>), and as defined in <a data-link-type="biblio" href="#biblio-miaf">[MIAF]</a>, with the <code>aux_type</code> field of the <code>AuxiliaryTypeProperty</code> (respectively <code>AuxiliaryTypeInfoBox</code>) set to <code>urn:mpeg:mpegB:cicp:systems:auxiliary:alpha</code>. An <a data-link-type="dfn" href="#av1-alpha-image-item" id="ref-for-av1-alpha-image-item">AV1 Alpha Image Item</a> (respectively an <a data-link-type="dfn" href="#av1-alpha-image-sequence" id="ref-for-av1-alpha-image-sequence">AV1 Alpha Image Sequence</a>) shall be encoded with the same bit depth as the associated master AV1 Image Item (respectively AV1 Image Sequence).</p>
   <p>For <a data-link-type="dfn" href="#av1-alpha-image-item" id="ref-for-av1-alpha-image-item①">AV1 Alpha Image Item</a> and <a data-link-type="dfn" href="#av1-alpha-image-sequence" id="ref-for-av1-alpha-image-sequence①">AV1 Alpha Image Sequence</a>, the ColourInformationBox should be omitted. If present, readers shall ignore it.</p>
   <p>An <dfn data-dfn-type="dfn" data-export id="av1-depth-image-item">AV1 Depth Image Item<a class="self-link" href="#av1-depth-image-item"></a></dfn> (respectively an <dfn data-dfn-type="dfn" data-export id="av1-depth-image-sequence">AV1 Depth Image Sequence<a class="self-link" href="#av1-depth-image-sequence"></a></dfn>) is an <a data-link-type="dfn" href="#av1-auxiliary-image-item" id="ref-for-av1-auxiliary-image-item①">AV1 Auxiliary Image Item</a> (respectively an <a data-link-type="dfn" href="#av1-auxiliary-image-sequence" id="ref-for-av1-auxiliary-image-sequence①">AV1 Auxiliary Image Sequence</a>), and as defined in <a data-link-type="biblio" href="#biblio-miaf">[MIAF]</a>, with the <code>aux_type</code> field of the <code>AuxiliaryTypeProperty</code> (respectively <code>AuxiliaryTypeInfoBox</code>) set to <code>urn:mpeg:mpegB:cicp:systems:auxiliary:depth</code>.</p>
   <p class="note" role="note"><span>NOTE:</span> <a data-link-type="biblio" href="#biblio-av1">[AV1]</a> supports encoding either 3-component images (whose semantics are given by the <code>matrix_coefficients</code> element), or 1-component images (monochrome). When an image requires a different number of components, multiple auxiliary images may be used, each providing additional component(s), according to the semantics of their <code>aux_type</code> field. In such case, the maximum number of components is restricted by number of possible items in a file, coded on 16 or 32 bits.</p>
   <h2 class="heading settled" data-level="5" id="brands"><span class="secno">5. </span><span class="content">Brands, Internet media types and file extensions</span><a class="self-link" href="#brands"></a></h2>
   <h3 class="heading settled" data-level="5.1" id="brands-overview"><span class="secno">5.1. </span><span class="content">Brands overview</span><a class="self-link" href="#brands-overview"></a></h3>
   <p>As defined by <a data-link-type="biblio" href="#biblio-isobmff">[ISOBMFF]</a>, the presence of a brand in the <code><a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff⑤">compatible_brands</a></code> list in the <code><a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff⑥">FileTypeBox</a></code> can be interpreted as the permission for those <a data-link-type="dfn" href="#av1-image-file-format" id="ref-for-av1-image-file-format④">AV1 Image File Format</a> readers/parsers and <a data-link-type="dfn" href="#av1-image-file-format" id="ref-for-av1-image-file-format⑤">AV1 Image File Format</a> renderers that only implement the features required by the brand, to process the corresponding file and only the parts (e.g. items or sequences) that comply with the brand.</p>
   <p>An <a data-link-type="dfn" href="#av1-image-file-format" id="ref-for-av1-image-file-format⑥">AV1 Image File Format</a> file may conform to multiple brands. Similarly, an <a data-link-type="dfn" href="#av1-image-file-format" id="ref-for-av1-image-file-format⑦">AV1 Image File Format</a> reader/parser or <a data-link-type="dfn" href="#av1-image-file-format" id="ref-for-av1-image-file-format⑧">AV1 Image File Format</a> renderer may be capable of processing the features associated with one or more brands.</p>
   <p>If any of the brands defined in this document is specified in the <code><a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff⑦">major_brand</a></code> field of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff⑧">FileTypeBox</a>, the file extension and Internet Media Type should respectively be "<code>.avif</code>" and "<code>image/avif</code>" as defined in <a href="#mime-registration">§ 8 AVIF Media Type Registration</a>.</p>
   <h3 class="heading settled" data-level="5.2" id="image-and-image-collection-brand"><span class="secno">5.2. </span><span class="content">AVIF image and image collection brand</span><a class="self-link" href="#image-and-image-collection-brand"></a></h3>
    The brand to identify <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item①⑥">AV1 image items</a> is <dfn class="dfn-paneled" data-dfn-for="AVIF Image brand" data-dfn-type="dfn" data-export id="avif-image-brand-avif" value="avif">avif</dfn>. 
   <p>Files that indicate this brand in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff⑨">compatible_brands</a> field of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff①⓪">FileTypeBox</a> shall comply with the following:</p>
   <ul>
    <li data-md>
     <p>The primary item shall be an <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item①⑦">AV1 Image Item</a> or be a derived image that references directly or indirectly one or more items that all are <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item①⑧">AV1 Image Items</a>.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#av1-auxiliary-image-item" id="ref-for-av1-auxiliary-image-item②">AV1 auxiliary image items</a> may be present in the file.</p>
   </ul>
   <p>Files that conform with these constraints should include the brand <code><a data-link-type="dfn" href="#avif-image-brand-avif" id="ref-for-avif-image-brand-avif">avif</a></code> in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff①①">compatible_brands</a> field of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff①②">FileTypeBox</a>.</p>
   <p>Additionally, the brand <dfn class="dfn-paneled" data-dfn-for="AVIF Intra-only brand" data-dfn-type="dfn" data-export id="avif-intra-only-brand-avio" value="avio">avio</dfn> is defined. If the file indicates the brand <code><a data-link-type="dfn" href="#avif-intra-only-brand-avio" id="ref-for-avif-intra-only-brand-avio">avio</a></code> in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff①③">compatible_brands</a> field of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff①④">FileTypeBox</a>, then the primary item or all the items referenced by the primary item shall be <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item①⑨">AV1 image items</a> made only of <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1④②">Intra Frames</a>. Conversely, if the previous constraint applies, the brand <code><a data-link-type="dfn" href="#avif-intra-only-brand-avio" id="ref-for-avif-intra-only-brand-avio①">avio</a></code> should be used in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff①⑤">compatible_brands</a> field of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff①⑥">FileTypeBox</a>.</p>
   <h3 class="heading settled" data-level="5.3" id="image-sequence-brand"><span class="secno">5.3. </span><span class="content">AVIF image sequence brands</span><a class="self-link" href="#image-sequence-brand"></a></h3>
    The brand to identify AVIF image sequences is <dfn class="dfn-paneled" data-dfn-for="AVIF Image Sequence brand" data-dfn-type="dfn" data-export id="avif-image-sequence-brand-avis" value="avis">avis</dfn>. 
   <p>Files that indicate this brand in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff①⑦">compatible_brands</a> field of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff①⑧">FileTypeBox</a> shall comply with the following:</p>
   <ul>
    <li data-md>
     <p>they shall contain one or more <a data-link-type="dfn" href="#av1-image-sequence" id="ref-for-av1-image-sequence②">AV1 image sequences</a>.</p>
    <li data-md>
     <p>they may contain <a data-link-type="dfn" href="#av1-auxiliary-image-sequence" id="ref-for-av1-auxiliary-image-sequence②">AV1 auxiliary image sequences</a>.</p>
   </ul>
   <p>Files that conform with these constraints should include the brand <code><a data-link-type="dfn" href="#avif-image-sequence-brand-avis" id="ref-for-avif-image-sequence-brand-avis">avis</a></code> in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff①⑨">compatible_brands</a> field of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff②⓪">FileTypeBox</a>.</p>
   <p>Additionally, if a file contains <a data-link-type="dfn" href="#av1-image-sequence" id="ref-for-av1-image-sequence③">AV1 image sequences</a> and the brand <code><a data-link-type="dfn" href="#avif-intra-only-brand-avio" id="ref-for-avif-intra-only-brand-avio②">avio</a></code> is used in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff②①">compatible_brands</a> field of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff②②">FileTypeBox</a>, the item constraints for this brand shall be met and at least one of the <a data-link-type="dfn" href="#av1-image-sequence" id="ref-for-av1-image-sequence④">AV1 image sequences</a> shall be made only of <a data-link-type="dfn" href="#biblio-av1-isobmff" id="ref-for-biblio-av1-isobmff⑥">AV1 Samples</a> marked as <a class="property" data-link-type="propdesc" href="#biblio-isobmff" id="ref-for-biblio-isobmff②③">sync</a>. Conversely, if such a track exists and the constraints of the brand <code><a data-link-type="dfn" href="#avif-intra-only-brand-avio" id="ref-for-avif-intra-only-brand-avio③">avio</a></code> on <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item②⓪">AV1 image items</a> are met, the brand should be used.</p>
   <p class="note" role="note"><span>NOTE:</span> As defined in <a data-link-type="biblio" href="#biblio-miaf">[MIAF]</a>, a file that is primarily an image sequence still has at least an image item. Hence, it can also declare brands for signaling the image item.</p>
   <h2 class="heading settled" data-level="6" id="file-constraints"><span class="secno">6. </span><span class="content">General constraints</span><a class="self-link" href="#file-constraints"></a></h2>
   <p>The following constraints are common to files compliant with this specification:</p>
   <ul>
    <li data-md>
     <p>The file shall be compliant with the <a data-link-type="biblio" href="#biblio-miaf">[MIAF]</a> specification and list <a class="property" data-link-type="propdesc" href="#biblio-miaf" id="ref-for-biblio-miaf④">miaf</a> in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff②④">compatible_brands</a> field of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff②⑤">FileTypeBox</a>.</p>
    <li data-md>
     <p>The file shall list <code>'<a data-link-type="dfn" href="#avif-image-brand-avif" id="ref-for-avif-image-brand-avif①">avif</a>'</code> or <code>'<a data-link-type="dfn" href="#avif-image-sequence-brand-avis" id="ref-for-avif-image-sequence-brand-avis①">avis</a>'</code> in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff②⑥">compatible_brands</a> field of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff②⑦">FileTypeBox</a>.</p>
    <li data-md>
     <p>If transformative properties are used in derivation chains (as defined in <a data-link-type="biblio" href="#biblio-miaf">[MIAF]</a>), they shall only be associated with items that are not referenced by another derived item. For example, if a file contains a grid item and its referenced coded image items, cropping, mirroring or rotation transformations are only permitted on the grid item itself.</p>
   </ul>
   <p class="note" role="note"><span>NOTE:</span> This constraint further restricts files compared to <a data-link-type="biblio" href="#biblio-miaf">[MIAF]</a>.</p>
   <h2 class="heading settled" data-level="7" id="profiles"><span class="secno">7. </span><span class="content">Profiles</span><a class="self-link" href="#profiles"></a></h2>
   <h3 class="heading settled" data-level="7.1" id="profiles-overview"><span class="secno">7.1. </span><span class="content">Overview</span><a class="self-link" href="#profiles-overview"></a></h3>
   <p>The profiles defined in this section are for enabling interoperability between <a data-link-type="dfn" href="#av1-image-file-format" id="ref-for-av1-image-file-format⑨">AV1 Image File Format</a> files and <a data-link-type="dfn" href="#av1-image-file-format" id="ref-for-av1-image-file-format①⓪">AV1 Image File Format</a> readers/parsers. A profile imposes a set of specific restrictions and is signaled by brands defined in this specification.</p>
   <p>The <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff②⑧">FileTypeBox</a> should declare at least one profile that enables decoding of the primary image item. It is not an error for the encoder to include an auxiliary image that is not allowed by the specified profile(s).</p>
   <p>If <code>'<a data-link-type="dfn" href="#avif-image-sequence-brand-avis" id="ref-for-avif-image-sequence-brand-avis②">avis</a>'</code> is declared in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff②⑨">FileTypeBox</a> and a profile is declared in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff③⓪">FileTypeBox</a>, the profile shall also enable decoding of at least one image sequence track. The profile should allow decoding of any associated auxiliary image sequence tracks, unless it is acceptable to decode the image sequence without its auxiliary image sequence tracks.</p>
   <p>It is possible for a file compliant to this <a data-link-type="dfn" href="#av1-image-file-format" id="ref-for-av1-image-file-format①①">AV1 Image File Format</a> to not be able to declare an AVIF profile, if the corresponding AV1 encoding characteristics do not match any of the defined profiles.</p>
   <p class="note" role="note"><span>NOTE:</span> <a data-link-type="biblio" href="#biblio-av1">[AV1]</a> supports 3 bit depths: 8, 10 and 12 bits, and the maximum dimensions of a coded image is 65536x65536, when <a data-link-type="dfn" href="#biblio-av1" id="ref-for-biblio-av1④③">seq_level_idx</a> is set to 31 (maximum parameters level).</p>
   <div class="example" id="example-ee584b29"><a class="self-link" href="#example-ee584b29"></a>If an image is encoded with dimensions (respectively a bit depth) that exceed the maximum dimensions (respectively bit depth) required by the AV1 profile and level of the AVIF profiles defined in this specification, the file will only signal general AVIF brands.</div>
   <h3 class="heading settled" data-level="7.2" id="baseline-profile"><span class="secno">7.2. </span><span class="content">AVIF Baseline Profile</span><a class="self-link" href="#baseline-profile"></a></h3>
   <p>This section defines the MIAF AV1 Baseline profile of <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a>, specifically for <a data-link-type="biblio" href="#biblio-av1">[AV1]</a> bitstreams, based on the constraints specified in <a data-link-type="biblio" href="#biblio-miaf">[MIAF]</a> and identified by the brand <dfn class="css" data-dfn-for="AV1 Image Item Type" data-dfn-type="value" data-export id="valdef-av1-image-item-type-ma1b">MA1B<a class="self-link" href="#valdef-av1-image-item-type-ma1b"></a></dfn>.</p>
   <p>If the brand <code>MA1B</code> is in the list of <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff③①">compatible_brands</a> of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff③②">FileTypeBox</a>, the common constraints in the section <a href="#brands">§ 5 Brands, Internet media types and file extensions</a> shall apply.</p>
   <p>The following additional constraints apply to all <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item②①">AV1 Image Items</a> and all <a data-link-type="dfn" href="#av1-image-sequence" id="ref-for-av1-image-sequence⑤">AV1 Image Sequences</a>:</p>
   <ul>
    <li data-md>
     <p>The AV1 profile shall be the Main Profile and the level shall be 5.1 or lower.</p>
   </ul>
   <p class="note" role="note"><span>NOTE:</span> AV1 tiers are not constrained because timing is optional in image sequences and are not relevant in image items or collections.</p>
   <p class="note" role="note"><span>NOTE:</span> Level 5.1 is chosen for the Baseline profile to ensure that no single coded image exceeds 4k resolution, as some decoder may not be able to handle larger images. More precisely, following <a data-link-type="biblio" href="#biblio-av1">[AV1]</a> level definitions, coded image items compliant to the AVIF Baseline profile may not have a number of pixels greater than 8912896, a width greater than 8192 or a height greater than 4352. It is still possible to use the Baseline profile to create larger images using grid derivation.</p>
   <div class="example" id="example-fd090b5d">
    <a class="self-link" href="#example-fd090b5d"></a> A file containing items compliant with this profile is expected to list the following brands, in any order, in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff③③">compatible_brands</a> of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff③④">FileTypeBox</a>: 
    <p><code>avif, mif1, miaf, MA1B</code></p>
    <p>A file containing a <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif②⑧">pict</a> track compliant with this profile is expected to list the following brands, in any order, in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff③⑤">compatible_brands</a> of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff③⑥">FileTypeBox</a>:</p>
    <p><code>avis, msf1, miaf, MA1B</code></p>
    <p>A file containing a <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif②⑨">pict</a> track compliant with this profile and made only of samples marked <a class="property" data-link-type="propdesc" href="#biblio-isobmff" id="ref-for-biblio-isobmff③⑦">sync</a> is expected to list the following brands, in any order, in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff③⑧">compatible_brands</a> of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff③⑨">FileTypeBox</a>:</p>
    <p><code>avis, avio, msf1, miaf, MA1B</code></p>
   </div>
   <h3 class="heading settled" data-level="7.3" id="advanced-profile"><span class="secno">7.3. </span><span class="content">AVIF Advanced Profile</span><a class="self-link" href="#advanced-profile"></a></h3>
   <p>This section defines the MIAF AV1 Advanced profile of <a data-link-type="biblio" href="#biblio-heif">[HEIF]</a>, specifically for <a data-link-type="biblio" href="#biblio-av1">[AV1]</a> bitstreams, based on the constraints specified in <a data-link-type="biblio" href="#biblio-miaf">[MIAF]</a> and identified by the brand <dfn class="css" data-dfn-for="AV1 Image Item Type" data-dfn-type="value" data-export id="valdef-av1-image-item-type-ma1a">MA1A<a class="self-link" href="#valdef-av1-image-item-type-ma1a"></a></dfn>.</p>
   <p>If the brand <code>MA1A</code> is in the list of <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff④⓪">compatible_brands</a> of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff④①">FileTypeBox</a>, the common constraints in the section <a href="#brands">§ 5 Brands, Internet media types and file extensions</a> shall apply.</p>
   <p>The following additional constraints apply to all <a data-link-type="dfn" href="#av1-image-item" id="ref-for-av1-image-item②②">AV1 Image Items</a>:</p>
   <ul>
    <li data-md>
     <p>The AV1 profile shall be the High Profile and the level shall be 6.0 or lower.</p>
   </ul>
   <p class="note" role="note"><span>NOTE:</span> Following <a data-link-type="biblio" href="#biblio-av1">[AV1]</a> level definitions, coded image items compliant to the AVIF Advanced profile may not have a number of pixels greater than 35651584, a width greater than 16384 or a height greater than 8704. It is still possible to use the Advanced profile to create larger images using grid derivation.</p>
   <p>The following additional constraints apply only to <a data-link-type="dfn" href="#av1-image-sequence" id="ref-for-av1-image-sequence⑥">AV1 Image Sequences</a>:</p>
   <ul>
    <li data-md>
     <p>The AV1 profile shall be either Main Profile or High Profile.</p>
    <li data-md>
     <p>The AV1 level for Main Profile shall be 5.1 or lower.</p>
    <li data-md>
     <p>The AV1 level for High Profile shall be 5.1 or lower.</p>
   </ul>
   <div class="example" id="example-e237da1f">
    <a class="self-link" href="#example-e237da1f"></a> A file containing items compliant with this profile is expected to list the following brands, in any order, in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff④②">compatible_brands</a> of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff④③">FileTypeBox</a>: 
    <p><code>avif, mif1, miaf, MA1A</code></p>
    <p>A file containing a <a class="property" data-link-type="propdesc" href="#biblio-heif" id="ref-for-biblio-heif③⓪">pict</a> track compliant with this profile is expected to list the following brands, in any order, in the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff④④">compatible_brands</a> of the <a data-link-type="dfn" href="#biblio-isobmff" id="ref-for-biblio-isobmff④⑤">FileTypeBox</a>:</p>
    <p><code>avis, msf1, miaf, MA1A</code></p>
   </div>
   <h2 class="heading settled" data-level="8" id="mime-registration"><span class="secno">8. </span><span class="content">AVIF Media Type Registration</span><a class="self-link" href="#mime-registration"></a></h2>
   <p>The media type <code>"image/avif"</code> is officially registered with IANA and available at: <a href="https://www.iana.org/assignments/media-types/image/avif">https://www.iana.org/assignments/media-types/image/avif</a>.</p>
   <h2 class="heading settled" data-level="9" id="change-list"><span class="secno">9. </span><span class="content">Changes since v1.0.0 release</span><a class="self-link" href="#change-list"></a></h2>
   <ul>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/147">Constrain image sequence to one sample description entry and constant sequence header.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/145">Clarify ispe semantics.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/144">Update use of essential field for av1C.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/138">Clarify that constraints on still picture flags apply to non-layered images.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/130">Clarify in-profile and out-of-profile restrictions.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/127">Replace Media Type section with link to IANA official registration.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/118">Define properties for layered images to allow selective or progressive decoding of layers.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/125">Add restriction on transformative properties in derivation chains.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/114">Extend semantics of avio brand to image items and clarify brand usage.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/113">Clarify image sequence constraints in profile definitions.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/116">add support for the ContentColourVolumeBox property.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/112">Remove wrong recommendations regarding still picture flags in image sequences.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/101">constrain auxiliary images to be full range, and ignore colr for alpha planes.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/100">Rephrase statement about auxiliary images and profiles.</a> (Editorial change)</p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/86">Remove the definition of the image/avif-sequence MIME type.</a></p>
    <li data-md>
     <p><a href="https://github.com/AOMediaCodec/av1-avif/pull/85">Adding bitdepth constraint for alpha and master images.</a></p>
   </ul>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p> Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
            The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
            in the normative parts of this document
            are to be interpreted as described in RFC 2119.
            However, for readability,
            these words do not appear in all uppercase letters in this specification. </p>
   <p> All of the text of this specification is normative
            except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p> Examples in this specification are introduced with the words “for example”
            or are set apart from the normative text with <code>class="example"</code>, like this: </p>
   <div class="example" id="example-example"><a class="self-link" href="#example-example"></a> This is an example of an informative example. </div>
   <p> Informative notes begin with the word “Note”
            and are set apart from the normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note"> Note, this is an informative note. </p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don’t scroll to compensate for the ToC if we’re above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don’t know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn’t exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn’t standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don’t have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we’re at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can’t find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#valdef-av1layeredimageindexingproperty-a1lx">a1lx</a><span>, in § 2.3.2.3.1</span>
   <li><a href="#operatingpointselectorproperty-a1op">a1op</a><span>, in § 2.3.2.1.1</span>
   <li><a href="#valdef-av1-image-item-type-av01">av01</a><span>, in § 2.1</span>
   <li><a href="#av1-alpha-image-item">AV1 Alpha Image Item</a><span>, in § 4</span>
   <li><a href="#av1-alpha-image-sequence">AV1 Alpha Image Sequence</a><span>, in § 4</span>
   <li><a href="#av1-auxiliary-image-item">AV1 Auxiliary Image Item</a><span>, in § 4</span>
   <li><a href="#av1-auxiliary-image-sequence">AV1 Auxiliary Image Sequence</a><span>, in § 4</span>
   <li><a href="#valdef-av1-item-configuration-property-av1c">av1C</a><span>, in § 2.2.1</span>
   <li><a href="#av1-depth-image-item">AV1 Depth Image Item</a><span>, in § 4</span>
   <li><a href="#av1-depth-image-sequence">AV1 Depth Image Sequence</a><span>, in § 4</span>
   <li><a href="#av1-image-file-format">AV1 Image File Format</a><span>, in § 1</span>
   <li><a href="#av1-image-item">AV1 Image Item</a><span>, in § 2.1</span>
   <li><a href="#av1-image-item-data">AV1 Image Item Data</a><span>, in § 2.1</span>
   <li><a href="#av1-image-sequence">AV1 Image Sequence</a><span>, in § 3</span>
   <li><a href="#av1-item-configuration-property">AV1 Item Configuration Property</a><span>, in § 2.2.1</span>
   <li><a href="#av1layeredimageindexingproperty">AV1LayeredImageIndexingProperty</a><span>, in § 2.3.2.3.2</span>
   <li><a href="#avif-image-brand-avif">avif</a><span>, in § 5.2</span>
   <li><a href="#avif-intra-only-brand-avio">avio</a><span>, in § 5.2</span>
   <li><a href="#avif-image-sequence-brand-avis">avis</a><span>, in § 5.3</span>
   <li><a href="#layer_size">layer_size</a><span>, in § 2.3.2.3.4</span>
   <li><a href="#valdef-av1-image-item-type-ma1a">MA1A</a><span>, in § 7.3</span>
   <li><a href="#valdef-av1-image-item-type-ma1b">MA1B</a><span>, in § 7.2</span>
   <li><a href="#operatingpointselectorproperty">OperatingPointSelectorProperty</a><span>, in § 2.3.2.1.2</span>
   <li><a href="#op_index">op_index</a><span>, in § 2.3.2.1.4</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[AV1]</a> defines the following terms:
    <ul>
     <li><span>av1 bitstream</span>
     <li><span>color_range</span>
     <li><span>frameheight</span>
     <li><span>framewidth</span>
     <li><span>intra frame</span>
     <li><span>max_frame_height_minus1</span>
     <li><span>max_frame_width_minus1</span>
     <li><span>metadata obu</span>
     <li><span>mono_chrome</span>
     <li><span>operating point</span>
     <li><span>operating_points_cnt_minus_1</span>
     <li><span>reduced_still_picture_header</span>
     <li><span>render_height_minus1</span>
     <li><span>render_width_minus1</span>
     <li><span>seq_level_idx</span>
     <li><span>sequence header obu</span>
     <li><span>spatial_id</span>
     <li><span>still_picture</span>
     <li><span>temporal unit</span>
    </ul>
   <li>
    <a data-link-type="biblio">[AV1-ISOBMFF]</a> defines the following terms:
    <ul>
     <li><span>av1 sample</span>
     <li><span>av1 track</span>
     <li><span>av1codecconfigurationbox</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HEIF]</a> defines the following terms:
    <ul>
     <li><span>colr</span>
     <li><span>image_height</span>
     <li><span>image_width</span>
     <li><span>ispe</span>
     <li><span>layer_id</span>
     <li><span>lsel</span>
     <li><span>pasp</span>
     <li><span>pict</span>
     <li><span>pixi</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ISOBMFF]</a> defines the following terms:
    <ul>
     <li><span>cclv</span>
     <li><span>clap</span>
     <li><span>clli</span>
     <li><span>compatible_brands</span>
     <li><span>filetypebox</span>
     <li><span>major_brand</span>
     <li><span>mdcv</span>
     <li><span>sync</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MIAF]</a> defines the following terms:
    <ul>
     <li><span>miaf</span>
     <li><span>miaf auxiliary image item</span>
     <li><span>miaf auxiliary image sequence</span>
     <li><span>miaf image item</span>
     <li><span>miaf image sequence</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-av1">[AV1]
   <dd><a href="https://aomediacodec.github.io/av1-spec/av1-spec.pdf"><cite>AV1 Bitstream &amp; Decoding Process Specification</cite></a>. LS. URL: <a href="https://aomediacodec.github.io/av1-spec/av1-spec.pdf">https://aomediacodec.github.io/av1-spec/av1-spec.pdf</a>
   <dt id="biblio-av1-isobmff">[AV1-ISOBMFF]
   <dd><a href="https://aomediacodec.github.io/av1-isobmff/"><cite>AV1 Codec ISO Media File Format Binding</cite></a>. LS. URL: <a href="https://aomediacodec.github.io/av1-isobmff/">https://aomediacodec.github.io/av1-isobmff/</a>
   <dt id="biblio-heif">[HEIF]
   <dd><a href="https://www.iso.org/standard/66067.html"><cite>Information technology — High efficiency coding and media delivery in heterogeneous environments — Part 12: Image File Format</cite></a>. International Standard. URL: <a href="https://www.iso.org/standard/66067.html">https://www.iso.org/standard/66067.html</a>
   <dt id="biblio-isobmff">[ISOBMFF]
   <dd><a href="https://www.iso.org/standard/68960.html"><cite>Information technology — Coding of audio-visual objects — Part 12: ISO base media file format</cite></a>. International Standard. URL: <a href="https://www.iso.org/standard/68960.html">https://www.iso.org/standard/68960.html</a>
   <dt id="biblio-miaf">[MIAF]
   <dd><a href="https://www.iso.org/standard/74417.html"><cite>Information technology -- Multimedia application format (MPEG-A) -- Part 22: Multi-Image Application Format (MiAF)</cite></a>. Enquiry. URL: <a href="https://www.iso.org/standard/74417.html">https://www.iso.org/standard/74417.html</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
  </dl>
  <aside class="dfn-panel" data-for="av1-image-file-format">
   <b><a href="#av1-image-file-format">#av1-image-file-format</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-av1-image-file-format">1. Scope</a> <a href="#ref-for-av1-image-file-format①">(2)</a> <a href="#ref-for-av1-image-file-format②">(3)</a> <a href="#ref-for-av1-image-file-format③">(4)</a>
    <li><a href="#ref-for-av1-image-file-format④">5.1. Brands overview</a> <a href="#ref-for-av1-image-file-format⑤">(2)</a> <a href="#ref-for-av1-image-file-format⑥">(3)</a> <a href="#ref-for-av1-image-file-format⑦">(4)</a> <a href="#ref-for-av1-image-file-format⑧">(5)</a>
    <li><a href="#ref-for-av1-image-file-format⑨">7.1. Overview</a> <a href="#ref-for-av1-image-file-format①⓪">(2)</a> <a href="#ref-for-av1-image-file-format①①">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="av1-image-item">
   <b><a href="#av1-image-item">#av1-image-item</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-av1-image-item">2.1. AV1 Image Item</a> <a href="#ref-for-av1-image-item①">(2)</a> <a href="#ref-for-av1-image-item②">(3)</a>
    <li><a href="#ref-for-av1-image-item③">2.2.3. Other Item Properties</a>
    <li><a href="#ref-for-av1-image-item④">2.3.1. Overview</a> <a href="#ref-for-av1-image-item⑤">(2)</a> <a href="#ref-for-av1-image-item⑥">(3)</a> <a href="#ref-for-av1-image-item⑦">(4)</a> <a href="#ref-for-av1-image-item⑧">(5)</a> <a href="#ref-for-av1-image-item⑨">(6)</a> <a href="#ref-for-av1-image-item①⓪">(7)</a>
    <li><a href="#ref-for-av1-image-item①①">2.3.2.1.2. Description</a>
    <li><a href="#ref-for-av1-image-item①②">2.3.2.2. Layer Selector Property</a>
    <li><a href="#ref-for-av1-image-item①③">2.3.2.3.2. Description</a> <a href="#ref-for-av1-image-item①④">(2)</a>
    <li><a href="#ref-for-av1-image-item①⑤">4. Auxiliary Image Items and Sequences</a>
    <li><a href="#ref-for-av1-image-item①⑥">5.2. AVIF image and image collection brand</a> <a href="#ref-for-av1-image-item①⑦">(2)</a> <a href="#ref-for-av1-image-item①⑧">(3)</a> <a href="#ref-for-av1-image-item①⑨">(4)</a>
    <li><a href="#ref-for-av1-image-item②⓪">5.3. AVIF image sequence brands</a>
    <li><a href="#ref-for-av1-image-item②①">7.2. AVIF Baseline Profile</a>
    <li><a href="#ref-for-av1-image-item②②">7.3. AVIF Advanced Profile</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="av1-image-item-data">
   <b><a href="#av1-image-item-data">#av1-image-item-data</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-av1-image-item-data">2.1. AV1 Image Item</a> <a href="#ref-for-av1-image-item-data①">(2)</a> <a href="#ref-for-av1-image-item-data②">(3)</a>
    <li><a href="#ref-for-av1-image-item-data③">2.2.1. AV1 Item Configuration Property</a> <a href="#ref-for-av1-image-item-data④">(2)</a>
    <li><a href="#ref-for-av1-image-item-data⑤">2.3.1. Overview</a> <a href="#ref-for-av1-image-item-data⑥">(2)</a> <a href="#ref-for-av1-image-item-data⑦">(3)</a>
    <li><a href="#ref-for-av1-image-item-data⑧">2.3.2.3.2. Description</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="av1-item-configuration-property">
   <b><a href="#av1-item-configuration-property">#av1-item-configuration-property</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-av1-item-configuration-property">2.1. AV1 Image Item</a>
    <li><a href="#ref-for-av1-item-configuration-property①">2.2.3. Other Item Properties</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="operatingpointselectorproperty">
   <b><a href="#operatingpointselectorproperty">#operatingpointselectorproperty</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-operatingpointselectorproperty">2.2.2. Image Spatial Extents Property</a> <a href="#ref-for-operatingpointselectorproperty①">(2)</a> <a href="#ref-for-operatingpointselectorproperty②">(3)</a>
    <li><a href="#ref-for-operatingpointselectorproperty③">2.3.1. Overview</a> <a href="#ref-for-operatingpointselectorproperty④">(2)</a> <a href="#ref-for-operatingpointselectorproperty⑤">(3)</a> <a href="#ref-for-operatingpointselectorproperty⑥">(4)</a> <a href="#ref-for-operatingpointselectorproperty⑦">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="av1layeredimageindexingproperty">
   <b><a href="#av1layeredimageindexingproperty">#av1layeredimageindexingproperty</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-av1layeredimageindexingproperty">2.3.2.3.2. Description</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="av1-image-sequence">
   <b><a href="#av1-image-sequence">#av1-image-sequence</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-av1-image-sequence">3. Image Sequences</a>
    <li><a href="#ref-for-av1-image-sequence①">4. Auxiliary Image Items and Sequences</a>
    <li><a href="#ref-for-av1-image-sequence②">5.3. AVIF image sequence brands</a> <a href="#ref-for-av1-image-sequence③">(2)</a> <a href="#ref-for-av1-image-sequence④">(3)</a>
    <li><a href="#ref-for-av1-image-sequence⑤">7.2. AVIF Baseline Profile</a>
    <li><a href="#ref-for-av1-image-sequence⑥">7.3. AVIF Advanced Profile</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="av1-auxiliary-image-item">
   <b><a href="#av1-auxiliary-image-item">#av1-auxiliary-image-item</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-av1-auxiliary-image-item">4. Auxiliary Image Items and Sequences</a> <a href="#ref-for-av1-auxiliary-image-item①">(2)</a>
    <li><a href="#ref-for-av1-auxiliary-image-item②">5.2. AVIF image and image collection brand</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="av1-auxiliary-image-sequence">
   <b><a href="#av1-auxiliary-image-sequence">#av1-auxiliary-image-sequence</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-av1-auxiliary-image-sequence">4. Auxiliary Image Items and Sequences</a> <a href="#ref-for-av1-auxiliary-image-sequence①">(2)</a>
    <li><a href="#ref-for-av1-auxiliary-image-sequence②">5.3. AVIF image sequence brands</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="av1-alpha-image-item">
   <b><a href="#av1-alpha-image-item">#av1-alpha-image-item</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-av1-alpha-image-item">4. Auxiliary Image Items and Sequences</a> <a href="#ref-for-av1-alpha-image-item①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="av1-alpha-image-sequence">
   <b><a href="#av1-alpha-image-sequence">#av1-alpha-image-sequence</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-av1-alpha-image-sequence">4. Auxiliary Image Items and Sequences</a> <a href="#ref-for-av1-alpha-image-sequence①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="avif-image-brand-avif">
   <b><a href="#avif-image-brand-avif">#avif-image-brand-avif</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-avif-image-brand-avif">5.2. AVIF image and image collection brand</a>
    <li><a href="#ref-for-avif-image-brand-avif①">6. General constraints</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="avif-intra-only-brand-avio">
   <b><a href="#avif-intra-only-brand-avio">#avif-intra-only-brand-avio</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-avif-intra-only-brand-avio">5.2. AVIF image and image collection brand</a> <a href="#ref-for-avif-intra-only-brand-avio①">(2)</a>
    <li><a href="#ref-for-avif-intra-only-brand-avio②">5.3. AVIF image sequence brands</a> <a href="#ref-for-avif-intra-only-brand-avio③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="avif-image-sequence-brand-avis">
   <b><a href="#avif-image-sequence-brand-avis">#avif-image-sequence-brand-avis</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-avif-image-sequence-brand-avis">5.3. AVIF image sequence brands</a>
    <li><a href="#ref-for-avif-image-sequence-brand-avis①">6. General constraints</a>
    <li><a href="#ref-for-avif-image-sequence-brand-avis②">7.1. Overview</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>